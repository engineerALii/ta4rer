<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÿµÿßŸÜÿπ ÿ™ŸÇÿßÿ±Ÿäÿ± ÿ¨ÿßŸÖÿπŸäÿ© ÿßÿ≠ÿ™ÿ±ÿßŸÅŸä</title>
    <style>
        /* =========================================
           1. CORE VARIABLES & RESET
           ========================================= */
        :root {
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.5);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            --primary-color: #2563eb;
            --primary-hover: #1d4ed8;
            --text-main: #1e293b;
            --text-secondary: #64748b;
            --danger: #ef4444;
            
            /* Enhanced Font Stacks */
            --font-sans: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-serif: 'Times New Roman', Times, serif;
            --font-academic: 'Traditional Arabic', 'Simplified Arabic', serif;
            --font-kufi: 'Tahoma', 'Segoe UI', sans-serif; /* Simulating Kufi with bold sans */
            --font-digital: 'Courier New', Courier, monospace;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            outline: none;
        }

        body {
            font-family: var(--font-sans);
            background: linear-gradient(135deg, #f0f9ff 0%, #cbebff 100%);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
            overflow-x: hidden;
        }

        /* Decorative Background Elements */
        .bg-orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.6;
        }
        .bg-orb-1 { top: -10%; left: -10%; width: 50vw; height: 50vw; background: #bfdbfe; }
        .bg-orb-2 { bottom: -10%; right: -10%; width: 50vw; height: 50vw; background: #ddd6fe; }

        /* =========================================
           2. LAYOUT
           ========================================= */
        .app-container {
            display: flex;
            gap: 30px;
            width: 100%;
            max-width: 1400px;
            flex-wrap: wrap;
        }

        /* Left Side: Controls */
        .controls-panel {
            flex: 1;
            min-width: 320px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--glass-shadow);
            height: fit-content;
            position: sticky;
            top: 20px;
            z-index: 10;
        }

        /* Right Side: Preview */
        .preview-panel {
            flex: 2;
            min-width: 350px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            container-type: inline-size;
            padding-bottom: 50px;
        }

        /* =========================================
           3. CONTROLS UI
           ========================================= */
        h1 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #0f172a;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group { margin-bottom: 15px; }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        input[type="text"], select {
            width: 100%;
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #cbd5e1;
            background: rgba(255, 255, 255, 0.9);
            font-family: inherit;
            font-size: 0.95rem;
            transition: all 0.2s ease;
        }

        input[type="text"]:focus, select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            background: #fff;
        }

        .student-list { display: flex; flex-direction: column; gap: 8px; }
        
        .student-entry { display: flex; gap: 8px; animation: slideDown 0.2s ease; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        .btn {
            border: none;
            cursor: pointer;
            border-radius: 8px;
            font-family: inherit;
            font-weight: 600;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-icon { padding: 10px; flex-shrink: 0; }

        .btn-add {
            background: #f1f5f9;
            color: var(--primary-color);
            padding: 8px;
            width: 100%;
            margin-top: 8px;
            font-size: 0.9rem;
        }
        .btn-add:hover { background: #e2e8f0; }

        .btn-remove { background: #fee2e2; color: var(--danger); }
        .btn-remove:hover { background: #fecaca; }

        .btn-print {
            background: var(--primary-color);
            color: white;
            padding: 14px;
            width: 100%;
            margin-top: 25px;
            font-size: 1.1rem;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25);
        }
        .btn-print:hover { background: var(--primary-hover); transform: translateY(-1px); }

        .settings-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }

        /* =========================================
           4. A4 PAGE PREVIEW & THEMES
           ========================================= */
        .a4-wrapper {
            background: white;
            width: 210mm;
            min-height: 297mm;
            padding: 20mm;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            transform-origin: top center;
            transition: all 0.3s ease;
            overflow: hidden;
            color: #000;
        }

        /* Common Elements */
        .report-header { margin-bottom: 40px; position: relative; z-index: 2; }
        .report-body { position: relative; z-index: 2; min-height: 500px; display: flex; flex-direction: column; justify-content: center; }
        .report-footer { 
            position: absolute; bottom: 15mm; left: 0; width: 100%; 
            text-align: center; padding: 0 20mm; z-index: 2;
        }

        .uni-logo-placeholder {
            width: 80px; height: 80px; background: #f8fafc; border: 2px dashed #cbd5e1;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 2rem; margin: 0 auto 15px; color: #64748b;
        }
        
        .uni-name-text { font-size: 1.4rem; font-weight: bold; margin-bottom: 5px; }
        .report-title { font-size: 2.2rem; font-weight: 800; margin: 30px 0; line-height: 1.3; }
        
        .report-meta { width: 100%; max-width: 80%; margin: 0 auto; text-align: right; }
        .meta-row { display: flex; margin-bottom: 12px; font-size: 1.1rem; border-bottom: 1px solid transparent; padding-bottom: 4px; }
        .meta-label { font-weight: bold; width: 140px; flex-shrink: 0; opacity: 0.8; }
        .meta-value { flex-grow: 1; }
        .students-grid { display: flex; flex-direction: column; gap: 4px; }


        /* --- THEMES --- */

        /* 1. Formal (Classic) */
        [data-theme="formal"] {
            border: 1px solid #ccc;
        }
        [data-theme="formal"] .report-header { text-align: center; border-bottom: 3px double #000; padding-bottom: 20px; }
        [data-theme="formal"] .report-title { text-align: center; text-decoration: underline; text-underline-offset: 8px; }
        [data-theme="formal"] .report-meta { border: 1px solid #000; padding: 20px; }

        /* 2. Modern (Blue Gradient) */
        [data-theme="modern"] .report-header { text-align: center; }
        [data-theme="modern"]::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 20mm;
            background: linear-gradient(to right, #2563eb, #60a5fa);
        }
        [data-theme="modern"] .uni-logo-placeholder { background: white; border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-top: 5mm; }
        [data-theme="modern"] .report-title { color: #2563eb; text-align: center; }
        [data-theme="modern"] .meta-label { color: #2563eb; }
        [data-theme="modern"] .report-footer { border-top: 2px solid #2563eb; padding-top: 10px; }

        /* 3. Corporate (Side Bar) */
        [data-theme="corporate"] { padding: 0; display: flex; }
        [data-theme="corporate"]::before {
            content: ''; position: absolute; top: 0; right: 0; bottom: 0; width: 60mm;
            background: #1e293b; z-index: 0;
        }
        [data-theme="corporate"] .report-content-wrapper {
            position: relative; z-index: 1; width: 100%; height: 100%; padding: 20mm;
            display: flex; flex-direction: column;
        }
        [data-theme="corporate"] .report-header { 
            text-align: right; color: white; margin-right: -10mm; margin-top: 10mm;
            margin-bottom: 60px;
        }
        [data-theme="corporate"] .uni-logo-placeholder { 
            border-color: rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); color: white;
            margin: 0 0 20px auto; /* align right */
        }
        [data-theme="corporate"] .uni-name-text { color: white; }
        [data-theme="corporate"] .report-body { text-align: left; padding-right: 50mm; align-items: flex-start; }
        [data-theme="corporate"] .report-title { text-align: left; font-size: 3rem; color: #1e293b; border-left: 10px solid #f59e0b; padding-left: 20px; }
        [data-theme="corporate"] .report-meta { text-align: left; margin: 0; max-width: 100%; }
        [data-theme="corporate"] .meta-row { flex-direction: row; }
        [data-theme="corporate"] .meta-label { width: 120px; color: #64748b; }

        /* 4. Elegant (Minimal Serif) */
        [data-theme="elegant"] { border: 8px solid #f1f1f1; }
        [data-theme="elegant"] .report-header { text-align: center; }
        [data-theme="elegant"] .uni-logo-placeholder { display: none; }
        [data-theme="elegant"] .uni-name-text { font-family: var(--font-serif); font-style: italic; color: #555; font-size: 1.2rem; }
        [data-theme="elegant"] .report-title { 
            font-family: var(--font-serif); font-weight: normal; font-size: 2.8rem; 
            border-top: 1px solid #ddd; border-bottom: 1px solid #ddd; padding: 40px 0;
            text-align: center;
        }
        [data-theme="elegant"] .meta-row { justify-content: center; text-align: center; }
        [data-theme="elegant"] .meta-label { color: #888; font-weight: normal; }

        /* 5. Creative (Abstract Shapes) */
        [data-theme="creative"] { overflow: hidden; }
        [data-theme="creative"]::before {
            content: ''; position: absolute; top: -100px; left: -100px; width: 300px; height: 300px;
            background: #ec4899; border-radius: 50%; opacity: 0.1;
        }
        [data-theme="creative"]::after {
            content: ''; position: absolute; bottom: -50px; right: -50px; width: 400px; height: 400px;
            background: #8b5cf6; border-radius: 50%; opacity: 0.1; z-index: 0;
        }
        [data-theme="creative"] .report-title {
            background: linear-gradient(45deg, #ec4899, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900; text-align: center;
        }
        [data-theme="creative"] .uni-name-text { text-align: center; color: #8b5cf6; }
        [data-theme="creative"] .report-header { text-align: center; }


        /* --- FONTS --- */
        .font-sans { font-family: var(--font-sans) !important; }
        .font-serif { font-family: var(--font-serif) !important; }
        .font-academic { font-family: var(--font-academic) !important; }
        .font-kufi { font-family: var(--font-kufi) !important; font-weight: bold; }
        .font-digital { font-family: var(--font-digital) !important; letter-spacing: -1px; }

        /* CSS Icons */
        .icon { display: inline-block; width: 16px; height: 16px; position: relative; }
        .icon-plus::before, .icon-plus::after { content: ''; position: absolute; background: currentColor; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .icon-plus::before { width: 2px; height: 10px; }
        .icon-plus::after { width: 10px; height: 2px; }
        .icon-trash { border: 2px solid currentColor; border-top: none; width: 10px; height: 10px; margin: 2px auto 0; border-radius: 0 0 2px 2px; }
        .icon-trash::before { content: ''; position: absolute; top: -3px; left: -2px; width: 14px; height: 2px; background: currentColor; }


        /* =========================================
           5. RESPONSIVENESS & PRINT
           ========================================= */
        @media (max-width: 900px) {
            .app-container { flex-direction: column; }
            .preview-panel { padding-bottom: 20px; display: block; }
            .a4-wrapper { transform: scale(0.42); transform-origin: top center; margin: 0 auto; }
        }
        @media (min-width: 901px) and (max-width: 1200px) {
            .a4-wrapper { transform: scale(0.65); transform-origin: top center; }
        }
        @media (min-width: 1201px) {
            .a4-wrapper { transform: scale(0.75); transform-origin: top center; }
        }

        /* STRICT PRINT RULES */
        @media print {
            /* Hide EVERYTHING first */
            body * { visibility: hidden; }
            
            /* Clean up body */
            body { 
                background: white; 
                display: block; 
                margin: 0; 
                padding: 0; 
                overflow: visible;
            }

            /* Show only the A4 Page and its children */
            #a4Page, #a4Page * {
                visibility: visible;
            }

            /* Position the A4 page correctly */
            #a4Page {
                position: fixed;
                left: 0;
                top: 0;
                width: 210mm;
                height: 297mm;
                margin: 0;
                padding: 20mm; /* Re-apply default padding if lost */
                box-shadow: none;
                transform: none !important; /* IMPORTANT: Disable scaling */
                border: none;
            }

            /* Specific Layout Adjustments for Themes in Print */
            [data-theme="corporate"] {
                display: flex; /* Ensure flex works for sidebar layout */
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            [data-theme="modern"]::before {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>
    <div class="bg-orb bg-orb-1"></div>
    <div class="bg-orb bg-orb-2"></div>

    <div class="app-container">
        <!-- Controls Panel -->
        <aside class="controls-panel">
            <h1>üìÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±</h1>

            <div class="settings-grid">
                <div class="form-group">
                    <label>ÿßŸÑÿ™ÿµŸÖŸäŸÖ (Theme)</label>
                    <select id="themeSelect" onchange="updateTheme()">
                        <option value="formal">ÿ±ÿ≥ŸÖŸä ÿ£ŸÉÿßÿØŸäŸÖŸä</option>
                        <option value="modern">ŸÖŸàÿØÿ±ŸÜ (ÿ£ÿ≤ÿ±ŸÇ)</option>
                        <option value="corporate">ÿ¥ÿ±ŸÉÿßÿ™ (Corporate)</option>
                        <option value="elegant">ÿ£ŸÜŸäŸÇ (Elegant)</option>
                        <option value="creative">ÿ•ÿ®ÿØÿßÿπŸä (Creative)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ŸÜŸàÿπ ÿßŸÑÿÆÿ∑</label>
                    <select id="fontSelect" onchange="updateFont()">
                        <option value="font-sans">ÿ≠ÿØŸäÿ´ (Sans)</option>
                        <option value="font-serif">ÿ™ŸÇŸÑŸäÿØŸä (Serif)</option>
                        <option value="font-academic">ÿ£ŸÉÿßÿØŸäŸÖŸä (ŸÜÿ≥ÿÆ)</option>
                        <option value="font-kufi">ŸÉŸàŸÅŸä (ÿπÿ±Ÿäÿ∂)</option>
                        <option value="font-digital">ÿ±ŸÇŸÖŸä (ÿ¢ŸÑÿ© ŸÉÿßÿ™ÿ®ÿ©)</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>ÿßÿ≥ŸÖ ÿßŸÑÿ¨ÿßŸÖÿπÿ© / ÿßŸÑŸÖÿ§ÿ≥ÿ≥ÿ©</label>
                <input type="text" id="uniName" placeholder="ÿ¨ÿßŸÖÿπÿ© ÿßŸÑŸÇÿßŸáÿ±ÿ© - ŸÉŸÑŸäÿ© ÿßŸÑÿπŸÑŸàŸÖ" oninput="updatePreview()">
            </div>

            <div class="form-group">
                <label>ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±</label>
                <input type="text" id="reportTitle" placeholder="ÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä" oninput="updatePreview()">
            </div>

            <div class="form-group">
                <label>ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ¥ÿ±ŸÅ</label>
                <input type="text" id="supervisorName" placeholder="ÿØ. ŸÖÿ≠ŸÖÿØ ÿ£ÿ≠ŸÖÿØ" oninput="updatePreview()">
            </div>

            <div class="form-group">
                <label>ÿßŸÑÿ∑ŸÑÿßÿ® ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉŸàŸÜ</label>
                <div id="studentsContainer" class="student-list">
                    <div class="student-entry">
                        <input type="text" class="student-input" placeholder="ÿßÿ≥ŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®" oninput="updatePreview()" value="ÿßŸÑÿ∑ÿßŸÑÿ® ÿßŸÑÿ£ŸàŸÑ">
                    </div>
                </div>
                <button class="btn btn-add" onclick="addStudentField()">
                    <span class="icon icon-plus"></span>
                    ÿ•ÿ∂ÿßŸÅÿ© ÿ∑ÿßŸÑÿ®
                </button>
            </div>
            
            <div class="form-group">
                 <label>ÿßŸÑÿπÿßŸÖ ÿßŸÑÿØÿ±ÿßÿ≥Ÿä / ÿßŸÑÿ™ÿßÿ±ŸäÿÆ</label>
                 <input type="text" id="yearText" placeholder="2024 - 2025" oninput="updatePreview()">
            </div>

            <button class="btn btn-print" onclick="window.print()">
                ÿ∑ÿ®ÿßÿπÿ© ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± (PDF)
                <span style="font-size:1.2em">üñ®Ô∏è</span>
            </button>
        </aside>

        <!-- Preview Panel -->
        <main class="preview-panel">
            <div id="a4Page" class="a4-wrapper font-sans" data-theme="formal">
                <!-- Wrapper for absolute positioning content needed for some themes -->
                <div class="report-content-wrapper">
                    
                    <div class="report-header">
                        <div class="uni-logo-placeholder">üèõÔ∏è</div>
                        <h2 class="uni-name-text" id="prevUni">ÿ¨ÿßŸÖÿπÿ© ÿßŸÑŸÇÿßŸáÿ±ÿ© - ŸÉŸÑŸäÿ© ÿßŸÑÿπŸÑŸàŸÖ</h2>
                    </div>

                    <div class="report-body">
                        <h1 class="report-title" id="prevTitle">ÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸÅŸä ÿßŸÑÿ∑ÿ®</h1>
                        
                        <div class="report-meta">
                            <div class="meta-row">
                                <span class="meta-label">ÿ•ÿ¥ÿ±ÿßŸÅ:</span>
                                <span class="meta-value" id="prevSupervisor">ÿØ. ŸÖÿ≠ŸÖÿØ ÿ£ÿ≠ŸÖÿØ</span>
                            </div>
                            
                            <div class="meta-row" style="align-items: flex-start;">
                                <span class="meta-label">ÿ•ÿπÿØÿßÿØ:</span>
                                <div class="meta-value students-grid" id="prevStudents">
                                    <div class="student-item">ÿßŸÑÿ∑ÿßŸÑÿ® ÿßŸÑÿ£ŸàŸÑ</div>
                                </div>
                            </div>

                             <div class="meta-row">
                                <span class="meta-label">ÿßŸÑÿπÿßŸÖ:</span>
                                <span class="meta-value" id="prevYear">2024 - 2025</span>
                            </div>
                        </div>
                    </div>

                    <footer class="report-footer">
                        <!-- Footer Text removed as requested -->
                    </footer>
                </div>
            </div>
        </main>
    </div>

    <script>
        const studentsContainer = document.getElementById('studentsContainer');
        const prevStudents = document.getElementById('prevStudents');
        const a4Page = document.getElementById('a4Page');

        function updateTheme() {
            const theme = document.getElementById('themeSelect').value;
            a4Page.setAttribute('data-theme', theme);
        }

        function updateFont() {
            const font = document.getElementById('fontSelect').value;
            a4Page.className = `a4-wrapper ${font}`; // Reset and add new class
        }

        function addStudentField() {
            const div = document.createElement('div');
            div.className = 'student-entry';
            div.innerHTML = `
                <input type="text" class="student-input" placeholder="ÿßÿ≥ŸÖ ÿßŸÑÿ∑ÿßŸÑÿ®" oninput="updatePreview()">
                <button class="btn btn-remove btn-icon" onclick="removeStudent(this)"><span class="icon icon-trash"></span></button>
            `;
            studentsContainer.appendChild(div);
            div.querySelector('input').focus();
            updatePreview();
        }

        function removeStudent(btn) {
            if (document.querySelectorAll('.student-input').length > 1) {
                btn.parentElement.remove();
                updatePreview();
            } else {
                btn.previousElementSibling.value = '';
                updatePreview();
            }
        }

        function updatePreview() {
            setText('prevUni', 'uniName', 'ÿ¨ÿßŸÖÿπÿ© ÿßŸÑŸÇÿßŸáÿ±ÿ© - ŸÉŸÑŸäÿ© ÿßŸÑÿπŸÑŸàŸÖ');
            setText('prevTitle', 'reportTitle', 'ÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ŸÅŸä ÿßŸÑÿ∑ÿ®');
            setText('prevSupervisor', 'supervisorName', 'ÿØ. ŸÖÿ≠ŸÖÿØ ÿ£ÿ≠ŸÖÿØ');
            setText('prevYear', 'yearText', '2024 - 2025');

            const inputs = document.querySelectorAll('.student-input');
            prevStudents.innerHTML = '';
            inputs.forEach(input => {
                const name = input.value.trim();
                if (name) {
                    const div = document.createElement('div');
                    div.className = 'student-item';
                    div.textContent = name;
                    prevStudents.appendChild(div);
                }
            });
            if (prevStudents.children.length === 0) {
                prevStudents.innerHTML = '<div class="student-item" style="opacity:0.5">...</div>';
            }
        }

        function setText(targetId, inputId, defaultText) {
            const el = document.getElementById(inputId);
            document.getElementById(targetId).textContent = el.value || defaultText;
        }

        // Init
        updatePreview();
    </script>
</body>
</html>
